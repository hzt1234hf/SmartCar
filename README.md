# SmartCar
FreeScale智能车竞赛代码

TZ_MCF52259_(xxx).h类似格式的.h文件
    包含xxx各函数、全局变量外部声明以及预编译语句定义的头文件

DIY_ComDef.h
    包含了所有头文件，实现函数、外部变量的全局调用
main.c
    包含所有初始化函数的调用
    
TZ_MCF52259_ADC.c
    包含ADC初始化函数、中断函数、测试函数，只实现了轮训方式的代码，中断方式未实现

TZ_MCF52259_Delay.c
    包含一个汇编延时函数和多个非精确延时函数

TZ_MCF52259_DMA.c
    包含DMA各初始化函数、中断函数，其中DMA0作为UART0的DMA发送器，DMA1 DMA2 DMA3单独使用或者配合DTIMx作为触发源使用

TZ_MCF52259_EPORT.c
    包含EPROT各初始化函数、中断函数，其中EPROT0作为摄像头的PCLK触发源，EPROT7作为摄像头VSYNC触发源，PCLK中断作为智能车主要的控制时序。本文件还包括图像发送函数，函数中有多种方法进行图像的发送(循环发送、DMA发送)

TZ_MCF52259_GPT.c
    包含GPT各初始化函数、中断函数，只实现了脉冲计数功能，其中GPT0作为右电机转速的中断计数，GPT1作为左电机的中断计数，GPT2因为引脚被占用，所以未使用，GPT3作为颜色传感器的中断计数

TZ_MCF52259_I2C.c
    包含I2C各初始化函数、中断函数，只实现I2C0的初始化，智能车代码中并没有使用

TZ_MCF52259_PIT.c
    包含PIT各初始化函数、中断函数，PIT0中断作为PID调节中断，PIT1中断进行图像校正还原、图像信息提取、信息量化等，是整个项目最重要的代码

TZ_MCF52259_PWM.c
    包含PWM各初始化函数、中断函数，PWM0作为右电机的脉冲输出，PWM2作为左电机的脉冲输出，PWM4、PWM5级联作为舵机的脉冲输出
 
TZ_MCF52259_UART.c  
    包含UART各初始化函数、中断函数，默认115200波特率、8bit、无奇偶，UART0可配置为DMA方式发送/接受数据，UART1、UART2为常规发送/接收方式，代码中已经包含了发送函数，接受字符、字符串、字符数组等参数，推荐使用sprintf赋值数组后进行发送，已包含stdio.h头文件
    
TZ_MCF52259_USB.c
    暂未实现
    
TZ_CAMERA_CONFIG.c
    包含摄像头模块初始化函数，其中个寄存器参数可以对比数据手册进行修改
    
TZ_CAMERA_SCCB.c
    包含摄像头SCCB协议通信函数，使用软件实现，已封装好，引脚不同只需更改同文件引脚的预编译语句即可，其他直接调用
    
TZ_CAMERA_VAR.c
    包含很多变量的定义，大部分为图像处理中用到的变量，例如图像存储用的数组、图像行列、赛道信息数组
    
TZ_CONTROL_VAR.c
    包含很多PID控制用变量的定义，主要用于PID调节